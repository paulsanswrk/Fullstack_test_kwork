# Блоки location для добавления в существующий server блок nginx

# Основная обработка PHP файлов
location ~ \.php$ {
    try_files $uri =404;
    fastcgi_pass unix:/var/run/php/php8.1-fpm.sock; # измените на ваш путь к PHP-FPM
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include fastcgi_params;
}

# Убираем расширение .php из URL
location / {
    try_files $uri $uri.php $uri/ =404;
}

# Перенаправляем с .php на URL без расширения (301 редирект)
location ~ ^/([^/]+)\.php$ {
    return 301 /$1;
}

# Обрабатываем корневой URL
location = / {
    try_files $uri /page1.php;
}
